<!DOCTYPE html>
<html>
<meta charset="utf-8">
<link rel="stylesheet" href="/third-party/shoelace/shoelace.css">
<link rel="stylesheet" href="install-dialog.css">
<body class="install">
<!-- This script is at the top because we want the "defaultIconUrl" variable -->
<script src="/src/util/iconUrl.js"></script>

<header>
  <div class="icon">
    <img rv-src="iconUrl" onerror="this.src=defaultIconUrl">
  </div>
  <h1>
    <strong id="name">{ name }</strong>
    <span rv-show="version" id="version">{ version }</span>
  </h1>
</header>

<div id="install">
  <p>This is a Greasemonkey user script.  Click install to start using it.</p>

  <div id="details">
    <div rv-hide="grants | empty" id="apis">
      <p>Requires special APIs:</p>
      <ul>
        <li rv-each-grant="grants">{ grant }</li>
      </ul>
    </div>

    <div rv-hide="includes | empty" id="includes">
      <p>Runs on:</p>
      <ul>
        <li rv-each-include="includes">{ include }</li>
      </ul>
    </div>

    <div rv-hide="matches | empty" id="matches">
      <p>Matches:</p>
      <ul>
        <li rv-each-match="matches">{ match }</li>
      </ul>
    </div>

    <div rv-hide="excludes | empty" id="excludes">
      <p>Does not run on:</p>
      <ul>
        <li rv-each-exclude="excludes">{ exclude }</li>
      </ul>
    </div>
  </div>

  <div class="spacer"></div>

  <div class="text">
    <p>
      Malicious user scripts can violate your privacy, steal your data, and
      act on your behalf without your knowledge.  <strong>You should only
      install scripts from sources that you trust.</strong>
    </p>
  </div>

  <!-- TODO: Install in disabled state control, for review before running. -->
</div>

<div id="result">
  <div class="text">
    <p></p>
  </div>
</div>

<div id="footer">
  <button id="btn-cancel" class="button-big button-secondary"
      >Cancel</button>
  <div class="spacer"></div>
  <button id="btn-install" class="button-big button-success" disabled="disabled"
      >Install</button>
</div>

<script src="/third-party/rivets/rivets.bundled.min.js"></script>
<script src="/src/util/rivets-formatters.js"></script>
<script src="install-dialog.js"></script>

</body>
</html>
